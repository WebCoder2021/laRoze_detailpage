<!DOCTYPE html>
<html lang="en">
  {% load static %}{% load custom_tags %}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="{% static 'logo.png' %}">
    <title>LaRose</title>
    <link rel="stylesheet" href="{% static 'style.css' %}" />
    <link rel="stylesheet" href="{% static 'clock.css' %}" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 

  </head>
  <body>
    <div class="card-wrapper">
      <div class="card">
        <!-- card left -->
        <div class="product-imgs">
          <div class="img-display">
            <div class="discount">
              <p>Chegirma</p>
              <span>-{{product.discount}}%</span>
              
            </div>
            <div class="img-showcase">
              <img src="{{product.image1.url}}" alt="shoe image" />
              {% if product.image2 %}<img
                src="{{product.image2.url}}"
                alt="shoe image"
              />
              {% endif %} {% if product.image3 %}<img
                src="{{product.image3.url}}"
                alt="shoe image"
              />
              {% endif %} {% if product.video %}<video controls>
                <source src="{{product.video.url}}" type="video/mp4" />
                <!-- <source src="C:\Users\WebCoder\Desktop\Alexander Rybak - Fairytale - multilingual subtitles, HD.ogg" type="video/ogg"> -->
                Brauzeringiz video tegini qo'llab-quvvatlamaydi
              </video>
              {% endif %}
            </div>
            <div class="product_sale">
              <div class="pr_price p_price">
                <p>Eski narx</p>
                <p>{{product.price|number_group:'3'}} so'm</p>
              </div>
              <div class="pr_price p_discount">
                <p>Yangi narx</p>
                <p>{{product.new_price|number_group:'3'}} so'm</p>
              </div>
            </div>
          </div>
          <div class="img-select">
            {% if product.image2 %}
            <div class="img-item">
              <a href="#" data-id="1">
                <img src="{{product.image1.url}}" alt="shoe image" />
              </a>
            </div>
            {% endif %} {% if product.image2 %}
            <div class="img-item">
              <a href="#" data-id="2">
                <img src="{{product.image2.url}}" alt="shoe image" />
              </a>
            </div>
            {% endif %} {% if product.image3 %}
            <div class="img-item">
              <a href="#" data-id="3">
                <img src="{{product.image3.url}}" alt="shoe image" />
              </a>
            </div>
            {% endif %} {% if product.video %}
            <div class="img-item video">
              <a
                href="#"
                data-id="{% if not product.image3 %}3{% elif not product.image2 and not product.image3 %}2{% else %}4{% endif %}"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                  <path
                    d="M188.3 147.1C195.8 142.8 205.1 142.1 212.5 147.5L356.5 235.5C363.6 239.9 368 247.6 368 256C368 264.4 363.6 272.1 356.5 276.5L212.5 364.5C205.1 369 195.8 369.2 188.3 364.9C180.7 360.7 176 352.7 176 344V167.1C176 159.3 180.7 151.3 188.3 147.1V147.1zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"
                  />
                </svg>
                <video>
                  <source src="{{product.video.url}}" type="video/mp4" />
                  <!-- <source src="C:\Users\WebCoder\Desktop\Alexander Rybak - Fairytale - multilingual subtitles, HD.ogg" type="video/ogg"> -->
                  Your browser does not support the video tag.
                </video>
              </a>
            </div>
            {% endif %}
          </div>
        </div>
        <!-- card right -->
        <div class="product-content">
          <h2 class="product-title">{{product.name}}</h2>
          <a href="#" class="product-link">Internet magazin LaRoze</a>
          <!-- <div class = "product-rating">
              <i class = "fas fa-star"></i>
              <i class = "fas fa-star"></i>
              <i class = "fas fa-star"></i>
              <i class = "fas fa-star"></i>
              <i class = "fas fa-star-half-alt"></i>
              <span>4.7(21)</span>
            </div> -->

          <div class="product-price">
            <p class="last-price">
              Eski narx: <span>{{product.price}} so'm</span>
            </p>
            <p class="new-price">
              Yangi narx:
              <span>{{product.new_price}} so'm (-{{product.discount}}%)</span>
            </p>
          </div>

          <div class="product-detail">
            <h2>Ushbu mahsulot haqida:</h2>
            <p>{{product.content}}</p>
          </div>
          <div class="container">
            <div class="timer">
              <h2>Chegirma tugashiga qolgan vaqt</h2>
              <div class="clock" style="margin:4em 0 0;"></div>
            </div>
            <div class="placing-order">
              <h1>Buyurtm berish</h1>
              {% if err %} <p style="color: red;" >{{err}}</p> {% endif %}
              <form action="" method="POST">
                {% csrf_token %}
                <div class="form-itm">
                  <p for="">Rangi</p>
                  <div class="colors">
                    {% for pr in product.colors.all %}
                    <label>
                      <input type="radio" name="color" required value="{{pr.id}}"/>
                      <span style="border-right: 1px solid {{pr.color}};">
                        {{pr.name}}</span
                      >
                    </label>
                    {% endfor %}
                  </div>
                </div>
                <div class="form-itm">
                  <p for="">O'lchami</p>
                  <div class="colors">
                  {% for size in product.sizes.all %}
                    <label>
                      <input type="radio" name="size" required  value="{{size.id}}"/>
                      <span>{{size.name}}</span>
                    </label>
                    {% endfor %}
                  </div>
                </div>
                <div class="form-itm">
                  <p for="">FIO</p>
                  <input type="text" name="fio" placeholder="Familiya ism sha'rif" />
                </div>
                <div class="form-itm">
                  <p for="">Telefon raqam</p>
                  <input type="text" name="phone_number" placeholder="Telefon raqam" />
                </div>
                <div class="form-itm">
                  <p for="">Manzil</p>
                  <input type="text" name="address" placeholder="Manzil" />
                </div>
                <div class="form-itm">
                  <p for="">To'lov shakli</p>
                  <div class="colors">
                    {% for ty in payment_type %}
                    <label>
                      <input type="radio" name="payment" value="{{ty.id}}"/>
                      <span>{{ty.name}}</span>
                    </label>
                    {% endfor %}
                    
                  </div>
                </div>
                <div class="btn-div">
                  <button type="submit" class="btn">Chegirma narxda buyurtma berish</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
   
    <div class="backModal" {% if not yes %} style="display: none;" {% endif %}>
      <div id="modal" class="popupContainer">
        <header class="popupHeader">
            <span class="header_title"><img src="{% static 'logo.png' %}" alt=""></span>
            <span class="modal_close">X</span>
        </header>
  
        <section class="popupBody">
            <!-- Social Login -->
            <div>
              <p>{{text}}</p>
                <h1>üéâTabriklaymiz!üéä</h1>
                                <h2>Sizning üéÅ buyurtmangiz qabul qilindi</h2>
                                <p>Tez orada bizning operator buyurtmangiz bo'yicha yetkazib berish uchun siz bilan bog'lanishadi</p>
                                <h3>Iltimos, telefon raqamingiz aloqada bo'lib tursin</h3>
            </div>
        </section>
    </div>
    </div>
    <script>
      const imgs = document.querySelectorAll(".img-select a");
      const imgBtns = [...imgs];
      let imgId = 1;

      imgBtns.forEach((imgItem) => {
        imgItem.addEventListener("click", (event) => {
          event.preventDefault();
          imgId = imgItem.dataset.id;
          slideImage();
        });
      });

      function slideImage() {
        const displayWidth = document.querySelector(
          ".img-showcase img:first-child"
        ).clientWidth;

        document.querySelector(".img-showcase").style.transform = `translateX(${
          -(imgId - 1) * displayWidth
        }px)`;
      }

      window.addEventListener("resize", slideImage);
    </script>
      <script>
			var clock;

			$(document).ready(function() {

				// Grab the current date
				var currentDate = new Date();

				// Set some date in the future. In this case, it's always Jan 1
				var futureDate  = new Date(currentDate.getFullYear() + 1, -2, 1);

				// Calculate the difference in seconds between the future and current date
				var diff = futureDate.getTime() / 1000 - currentDate.getTime() / 1000;

				// Instantiate a coutdown FlipClock
				clock = $('.clock').FlipClock(diff, {
					clockFace: 'DailyCounter',
					countdown: true
				});
			});
    </script>
    <script src="{% static 'timer.js' %}"></script>
    <script>
      close = document.querySelector(".modal_close")
      modal = document.querySelector('.backModal')
      close.addEventListener('click',()=>{
modal.style.display = 'none'
      })
    </script>

  </body>
</html>
